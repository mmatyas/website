<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.64a4af025aa2d7b81588.css","/main.f342e172f8b50809b35c.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.b4d54b7a67743e8e6d69.css","/component---site-src-pages-index-jsc-4-f-f99.43e8475a82384623dc63.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.33970df87b0a2a248535.css","/component---theme-blog-post-pageccc-cab.913ca12af52bb71de98f.js"],"content---blog-2018-10-22-hello-worldcbb-e2a":["/content---blog-2018-10-22-hello-worldcbb-e2a.9c2e83dca080d3244ada.js"],"metadata---blog-2018-10-22-hello-world-75-b-360":["/metadata---blog-2018-10-22-hello-world-75-b-360.cf00bf416a5b3b17ba73.js"],"nextItem---blog-2018-10-22-hello-world-473-b89":["/nextItem---blog-2018-10-22-hello-world-473-b89.d99cc84a55b8ebae18d6.js"],"content---blog-2018-01-14-rust-2018-a-neon-wish-listaa-8-a9b":["/content---blog-2018-01-14-rust-2018-a-neon-wish-listaa-8-a9b.d4e40b9296f12a30ba45.js"],"nextItem---blog-2018-01-14-rust-2018-a-neon-wish-listcea-8d0":["/nextItem---blog-2018-01-14-rust-2018-a-neon-wish-listcea-8d0.e89b81c942fed6090d10.js"],"content---blog-2017-09-25-neon-wants-your-help-25-f-089":["/content---blog-2017-09-25-neon-wants-your-help-25-f-089.77021380abfc9e971d4a.js"],"nextItem---blog-2017-09-25-neon-wants-your-helpbc-0-72a":["/nextItem---blog-2017-09-25-neon-wants-your-helpbc-0-72a.38139701f750bf113b09.js"],"content---blog-2016-04-01-native-js-classes-in-neon-29-a-6e2":["/content---blog-2016-04-01-native-js-classes-in-neon-29-a-6e2.5fb58c46b15092b83e94.js"],"nextItem---blog-2016-04-01-native-js-classes-in-neon-81-a-35c":["/nextItem---blog-2016-04-01-native-js-classes-in-neon-81-a-35c.e8b0ad36e6019cc5a771.js"],"content---blog-2015-12-23-neon-node-rustb-3-e-e3c":["/content---blog-2015-12-23-neon-node-rustb-3-e-e3c.92f332e2503dff40af3d.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.55f7f2ac44dcd2cfad69.css","/component---theme-doc-page-1-be-9be.fefb9b5d25d523220c5a.js"],"docsMetadata---docs-1-da-721":["/docsMetadata---docs-1-da-721.52cb484b80f727ea1f6b.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.c470f1b94d3c35d1f80c.css","/component---theme-doc-item-178-a40.134c5948dbe7dbef9543.js"],"content---docs-arrays-9-fd-c60":["/content---docs-arrays-9-fd-c60.5b0c32e26f9f8ec5cb1c.js"],"metadata---docs-arraysb-79-a81":["/metadata---docs-arraysb-79-a81.3d081699017b6c0a919e.js"],"content---docs-arguments-65-b-849":["/content---docs-arguments-65-b-849.8a0076ec228f86d10886.js"],"metadata---docs-arguments-6-fe-fea":["/metadata---docs-arguments-6-fe-fea.63737c88629321c25a27.js"],"content---docs-errors-8-a-2-a16":["/content---docs-errors-8-a-2-a16.d19c8638cd05c4fd4c13.js"],"metadata---docs-errorsc-0-a-e30":["/metadata---docs-errorsc-0-a-e30.840c305ca92139ad1486.js"],"content---docs-electron-appse-84-526":["/content---docs-electron-appse-84-526.8ce5e37e40340c4b5721.js"],"metadata---docs-electron-apps-0-a-0-79d":["/metadata---docs-electron-apps-0-a-0-79d.c9f33c97ff98394669ce.js"],"content---docs-cli-1-a-2-6cb":["/content---docs-cli-1-a-2-6cb.2b467eb79328bb0fdec8.js"],"metadata---docs-cli-7-a-6-ef7":["/metadata---docs-cli-7-a-6-ef7.22ff0f59c18ce215622b.js"],"content---docs-classes-6-ab-bc0":["/content---docs-classes-6-ab-bc0.a3fac2838527e36243bb.js"],"metadata---docs-classesb-07-47b":["/metadata---docs-classesb-07-47b.00b48275a3194ef11109.js"],"content---docs-functionsd-47-b12":["/content---docs-functionsd-47-b12.b8948918e826473a35fe.js"],"metadata---docs-functions-725-8e7":["/metadata---docs-functions-725-8e7.65465f3884a86d3259c4.js"],"content---docs-getting-startedd-58-f94":["/content---docs-getting-startedd-58-f94.cc722654ccbe7d73cf98.js"],"metadata---docs-getting-started-57-d-ca5":["/metadata---docs-getting-started-57-d-ca5.653ff93835cf0a9a1b33.js"],"content---docs-guidesd-7-b-d2a":["/content---docs-guidesd-7-b-d2a.6a9a11da73b2e659b3c4.js"],"metadata---docs-guides-390-64f":["/metadata---docs-guides-390-64f.250ec7ae4ca4527229b0.js"],"content---docs-example-projectsb-58-8db":["/content---docs-example-projectsb-58-8db.bc2ed6fe936cd03acdcc.js"],"metadata---docs-example-projectse-85-8bd":["/metadata---docs-example-projectse-85-8bd.1aed2d1018eeb656b64b.js"],"content---docs-intro-0-e-3-be1":["/content---docs-intro-0-e-3-be1.4aeece06157b118f3bdd.js"],"metadata---docs-intro-368-f5c":["/metadata---docs-intro-368-f5c.9437aa6a9bc3b20fad0a.js"],"content---docs-hello-world-900-633":["/content---docs-hello-world-900-633.ffc0d15a4ae9b7cf49be.js"],"metadata---docs-hello-world-5-fa-289":["/metadata---docs-hello-world-5-fa-289.f04a03d968e54e82aed9.js"],"content---docs-asyncfb-3-195":["/content---docs-asyncfb-3-195.b75049aa8a875dafe641.js"],"metadata---docs-async-86-c-1cb":["/metadata---docs-async-86-c-1cb.1b68ee21c00404fe4a1b.js"],"content---docs-objectsb-51-593":["/content---docs-objectsb-51-593.13b8a50d978346c6a7a1.js"],"metadata---docs-objects-066-5ec":["/metadata---docs-objects-066-5ec.2438627d9a8b621b9335.js"],"content---docs-learning-resources-4-bb-6d1":["/content---docs-learning-resources-4-bb-6d1.e30c5d988edba77991e8.js"],"metadata---docs-learning-resources-8-f-4-098":["/metadata---docs-learning-resources-8-f-4-098.25c792f8cb276ef44092.js"],"content---docs-json-3-ad-4fa":["/content---docs-json-3-ad-4fa.07183f4cafa252c235c1.js"],"metadata---docs-json-9-f-3-aa7":["/metadata---docs-json-9-f-3-aa7.359bc51a5df0ccc307e4.js"],"content---docs-modules-23-d-147":["/content---docs-modules-23-d-147.63065809a0e0111f9aec.js"],"metadata---docs-modules-572-72c":["/metadata---docs-modules-572-72c.76ae181adb1a09f6e824.js"],"content---docs-roadmap-0-df-a69":["/content---docs-roadmap-0-df-a69.f9be8540ff6f2a3f3918.js"],"metadata---docs-roadmap-5-f-6-348":["/metadata---docs-roadmap-5-f-6-348.bb7b028a83fbdc68196c.js"],"content---docs-parallelism-003-d1d":["/content---docs-parallelism-003-d1d.2fad740d7b2b0d9b5691.js"],"metadata---docs-parallelismc-81-633":["/metadata---docs-parallelismc-81-633.8703d0017747f5822eba.js"],"content---docs-primitivesf-05-214":["/content---docs-primitivesf-05-214.fcc4e11c55b55209a617.js"],"metadata---docs-primitivesd-85-9c2":["/metadata---docs-primitivesd-85-9c2.23502cda5fae59309896.js"],"content---docs-sdl-2-guide-658-6b7":["/content---docs-sdl-2-guide-658-6b7.c692c1b52876ab97a4a4.js"],"metadata---docs-sdl-2-guide-958-5dd":["/metadata---docs-sdl-2-guide-958-5dd.e9b7f1404c65fbdd1d0f.js"],"content---docs-word-counting-99-f-4ea":["/content---docs-word-counting-99-f-4ea.107e02bcf05f2dc95554.js"],"metadata---docs-word-countingb-5-c-379":["/metadata---docs-word-countingb-5-c-379.71cecc73020d3241130f.js"],"content---docs-tooling-12-e-380":["/content---docs-tooling-12-e-380.3bcffd75474fecb80c34.js"],"metadata---docs-tooling-6-ec-0db":["/metadata---docs-tooling-6-ec-0db.359436365c4ab3de4c71.js"],"content---docs-publishing-2-d-2-25a":["/content---docs-publishing-2-d-2-25a.b6240d8d8e3a0ee92a68.js"],"metadata---docs-publishinge-62-bbf":["/metadata---docs-publishinge-62-bbf.771934507d70fd713fc3.js"],"content---docs-type-checking-02-d-2e2":["/content---docs-type-checking-02-d-2e2.69371010f18d0766f8c8.js"],"metadata---docs-type-checking-45-c-033":["/metadata---docs-type-checking-45-c-033.6f64c8ebffb0eccaaef8.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.33970df87b0a2a248535.css","/component---theme-blog-list-pagea-6-a-7ba.bfa54709c98677fdab11.js"],"content---blogcee-0c9":["/content---blogcee-0c9.36318a910fcf86d7d361.js"],"content---blog-191-793":["/content---blog-191-793.72007fbc332a01650d80.js"],"content---blogab-1-45e":["/content---blogab-1-45e.df30db357808288871a2.js"],"content---blog-89-e-b53":["/content---blog-89-e-b53.9969c45f685bb29a3dda.js"],"content---blogccb-196":["/content---blogccb-196.fdf8c0c33f872feaae51.js"],"metadata---blog-1-a-9-d63":["/metadata---blog-1-a-9-d63.8404c3e32336db131032.js"]};/*]]>*/</script>

<title data-react-helmet="true">Publishing</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Neon · Fast and Safe Native Node.js Modules"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="Publishing native modules is a critical part of native modules. The user of a native node module that is compatible with the architecture of their machine. The Node community has devised two solutions for this:"/><meta data-react-helmet="true" property="og:description" content="Publishing native modules is a critical part of native modules. The user of a native node module that is compatible with the architecture of their machine. The Node community has devised two solutions for this:"/><meta data-react-helmet="true" property="og:url" content="https://neon-bindings.com/docs/publishing"/>

<link data-react-helmet="true" rel="shortcut icon" href="/logo/letter-logo.png"/>


<link rel="stylesheet" type="text/css" href="/main.64a4af025aa2d7b81588.css" />

<link rel="stylesheet" type="text/css" href="/0.43d7de033fc27ca8afd2.css" />

<link rel="stylesheet" type="text/css" href="/1.27ddfe0828c980c86fac.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-page-1-be-9be.55f7f2ac44dcd2cfad69.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-item-178-a40.c470f1b94d3c35d1f80c.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/logo/letter-logo.png" alt="Neon Logo"/><strong class="">Neon</strong></a><a class="navbar__item navbar__link" label="Docs" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="https://github.com/neon-bindings/examples#table-of-contents" label="Examples" target="_blank" rel="noopener noreferrer">Examples</a><a class="navbar__item navbar__link" href="/api/neon/" label="API" target="_blank" rel="noopener noreferrer">API</a><a class="navbar__item navbar__link" label="Resources" href="/docs/learning-resources">Resources</a><a class="navbar__item navbar__link" label="Roadmap" href="/docs/roadmap">Roadmap</a><a class="navbar__item navbar__link" label="Blog" href="/blog">Blog</a><a class="navbar__item navbar__link" href="https://github.com/neon-bindings/neon" label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_3J-v"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_Q9cy moon_1D9f"></span></div><div class="react-toggle-track-x"><span class="toggle_Q9cy sun_1k0k"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div><div class="navbar__search"><span role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/logo/letter-logo.png" alt="Neon Logo"/><strong>Neon</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" href="/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/neon-bindings/examples#table-of-contents" label="Examples" target="_blank" rel="noopener noreferrer">Examples</a></li><li class="menu__list-item"><a class="menu__link" href="/api/neon/" label="API" target="_blank" rel="noopener noreferrer">API</a></li><li class="menu__list-item"><a class="menu__link" label="Resources" href="/docs/learning-resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" label="Roadmap" href="/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" label="Blog" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/neon-bindings/neon" label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><main class="main"><div class="docPage_2GaM"><div class="docSidebarContainer_1duB"><div class="sidebar_1FX9"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_3VWg" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/hello-world">Hello World!</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cli">CLI</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/primitives">Primitives</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/arrays">Arrays</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/objects">Objects</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/arguments">Arguments</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/type-checking">Type Checking</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/classes">Classes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/json">JSON</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/errors">Errors</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/async">Async Tasks</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/electron-apps">Electron Apps</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/publishing">Publishing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/word-counting">Word Counting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/tooling">Tooling</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Other</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/example-projects">Who&#x27;s Using Neon</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/learning-resources">Learning Resources</a></li></ul></li></ul></div></div></div><main class="docMainContainer_1RNg"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2vWn"><header><h1 class="docTitle_2AEX">Publishing</h1></header><article><div class="markdown"><p>Publishing native modules is a critical part of native modules. The user of a native node module that is compatible with the architecture of their machine. The Node community has devised two solutions for this:</p><h3><a aria-hidden="true" class="anchor" id="1-upload-and-downloading-native-compiled-modules"></a><a aria-hidden="true" class="hash-link" href="#1-upload-and-downloading-native-compiled-modules">#</a>1. Upload and downloading native compiled modules</h3><blockquote><p>This method requires you to have a Travis CI account. If you do not have one, <a href="https://travis-ci.com">please create one</a>.</p></blockquote><p><a href="https://github.com/amilajack/disk-utility">Example</a></p><p>Library authors can compile the native module to all multiple targets (windows, macOS, linux) and then upload those targets. Users of the module will then download these targets.</p><p>To implement this solution, add the following <code>.travis.yml</code> to the root directory of your project:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-yaml codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">os</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> osx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> linux</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">language</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> node_js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">node_js</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> node</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cargo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">before_install</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Install Rust and Cargo</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> curl https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">//sh.rustup.rs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">sSf </span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> /tmp/rustup.sh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> sh /tmp/rustup.sh </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> export PATH=&quot;$HOME/.cargo/bin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$PATH&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> source &quot;$HOME/.cargo/env&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Install NPM packages</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> node </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">v</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> npm </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">v</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> npm install</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">script</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> npm test</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Publish when using &#x27;[publish binary]&#x27; keywords</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> COMMIT_MESSAGE=$(git log </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">format=%B </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">no</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">merges </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">n 1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> tr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">d &#x27;\n&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> if </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">COMMIT_MESSAGE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> =~ &quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">publish binary</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">; then yarn upload</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">binary </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token plain"> exit 0; fi;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Then add the following lines to your <code>package.json</code> to tell NPM to only publish the <code>lib</code> directory and the <code>native/index.node</code> file. Make sure to change the <code>type</code> and <code>url</code> properties in the <code>repository</code> object:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-json codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;repository&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;git&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;url&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;git+https://github.com/your-username-here/your-project-here.git&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;files&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;native/index.node&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lib&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Then install <a href="https://github.com/mapbox/node-pre-gyp"><code>node-pre-gyp</code></a> and <a href="https://github.com/bchr02/node-pre-gyp-github"><code>node-pre-gyp-github</code></a>. Note that the master branch of <code>node-pre-gyp</code> does not work with Neon so you must use a branch of a fork which adds support for Neon:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-bash codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># NPM</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> node-pre-gyp@amilajack/node-pre-gyp</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#neon-compat</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> node-pre-gyp-github</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Yarn</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> node-pre-gyp@amilajack/node-pre-gyp</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#neon-compat</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> node-pre-gyp-github</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Then make the following changes to the <code>scripts</code> section of your <code>package.json</code>:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-diff codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted">- &quot;install&quot;: &quot;neon build --release&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted"></span><span class="token inserted-sign inserted">+ &quot;install&quot;: &quot;node-pre-gyp install --fallback-to-build=false || neon build --release&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted">+ &quot;package&quot;: &quot;node-pre-gyp package&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted">+ &quot;upload-binary&quot;: &quot;node-pre-gyp package &amp;&amp; node-pre-gyp-github publish&quot;,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p><code>node-pre-gyp install --fallback-to-build=false</code> will attempt to download a binary and not fallback to a building the project with <code>node-pre-gyp</code>. The following part, <code> || neon build --release</code>, builds a production relase using Neon if the previous script throws an error.</p><p>Finally, add the following to the root of your <code>package.json</code>:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-json codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;binary&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;module_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;index&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;host&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://github.com/your-username-here/your-repo-here/releases/download/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;remote_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{version}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;package_name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{node_abi}-{platform}-{arch}.tar.gz&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;module_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./native&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;pkg_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>This configures <code>node-pre-gyp</code> by telling it where our <code>native/index.node</code> lives and where to upload the binaries to. Make sure to replace <code>your-username-here</code> and <code>your-repo-here</code> with the actual values.</p><p>Note: DO NOT replace <code>{version}</code> with actual version.</p><p>GitHub needs permission to publish releases on your behalf so you&#x27;ll need to create a Personal Access Token:</p><ol><li>Go to <a href="https://github.com/settings/developers">Developer Settings</a></li><li>Click <code>Personal access tokens</code></li><li>Click <code>Generate new token</code></li><li>Select <code>&quot;public_repo&quot;</code> and <code>&quot;repo_deployment&quot;</code></li><li>Generate Token</li><li>Copy the key that&#x27;s generated and set NODE_PRE_GYP_GITHUB_TOKEN environment variable to it. Within your command prompt:</li></ol><p>Then add the key to the Travis CI settings of your repo.</p><ol><li>Open your project on Travis CI</li><li>Click <code>More options</code> dropdown</li><li>Click <code>Settings</code></li><li>Go to <code>Environment Variables</code> and add <code>NODE_PRE_GYP_GITHUB_TOKEN</code> as <code>Name</code> and your generated token as the <code>Value</code> of your ENV variables</li></ol><p>For an <strong>example of a Neon project with publishing capabilities</strong>, see <a href="https://github.com/amilajack/disk-utility">amilajack/disk-utility</a>
For more details on <a href="https://github.com/bchr02/node-pre-gyp-github"><code>node-pre-gyp-github</code>&#x27;s <code>README</code></a> for more details on publishing options</p><p>Now you can publish binaries only on a specific commit. To do this you could borrow from the Travis CI idea of commit keywords and add special handling for commit messages with <!-- -->[publish binary]<!-- -->:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-bash codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> commit -a -m </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;[publish binary]&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Or, if you don&#x27;t have any changes to make simply run:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-bash codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> commit --allow-empty -m </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;[publish binary]&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>Note that these will run the <code>upload-binary</code> script, which will package and upload binaries for the current version of the package. A typical workflow of publishing a Neon module would include the following the following:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-bash codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> commit -a -m </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;[publish binary]&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> publish</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="2-shipping-compiling-native-modules"></a><a aria-hidden="true" class="hash-link" href="#2-shipping-compiling-native-modules">#</a>2. Shipping compiling native modules</h3><p>Another solution is shipping all the compiled native code targets with the npm module. In other words, this means publishing the package with the windows, macOS, and linux binaries. This solution is considered more secure that the approach of uploading and download modules because they prevent users of a module from <a href="https://www.kb.cert.org/vuls/id/319816/">wormhole attacks</a>.</p><p>This feature is still a work in progress as the <a href="https://github.com/neon-bindings/rfcs/issues/16"><code>neon build --target</code> feature</a> is a work in progress.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/electron-apps"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Electron Apps</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/word-counting"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Word Counting<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3iTc"><ul class="contents contents__left-border"><li><a href="#1-upload-and-downloading-native-compiled-modules" class="contents__link">1. Upload and downloading native compiled modules</a></li><li><a href="#2-shipping-compiling-native-modules" class="contents__link">2. Shipping compiling native modules</a></li></ul></div></div></div></div></div></div></main></div></main><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Getting Started" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" label="Examples" url="https://github.com/neon-bindings/examples">Examples</a></li><li class="footer__item"><a class="footer__link-item" label="API Reference" to="https://neon-bindings.com/api/neon/index.html" href="https://neon-bindings.com/api/neon/index.html">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Community Chat" url="https://rust-bindings-slackin.herokuapp.com">Community Chat</a></li><li class="footer__item"><a class="footer__link-item" label="Twitter" to="https://twitter.com/rustneon" href="https://twitter.com/rustneon">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="GitHub" to="https://github.com/neon-bindings/neon" href="https://github.com/neon-bindings/neon">GitHub</a></li></ul></div></div><div class="text--center logoContainer_c2nu"><div class="margin-bottom--sm"><img class="footer__logo" alt="Neon Logo" src="/logo/text-logo.svg"/></div><div class="sponsor_2a7p"><a href="https://www.netlify.com"><img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="netlify sponsor"/></a></div>Copyright © 2019 Neon Bindings</div></div></footer>
</div>

<script type="text/javascript" src="/runtime~main.e28f83067d0ffcd40a66.js"></script>

<script type="text/javascript" src="/main.f342e172f8b50809b35c.js"></script>

<script type="text/javascript" src="/0.3ca6c16fd6c0be6696f2.js"></script>

<script type="text/javascript" src="/1.caefbb40fb9b0dd354be.js"></script>

<script type="text/javascript" src="/component---theme-doc-page-1-be-9be.fefb9b5d25d523220c5a.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-1-da-721.52cb484b80f727ea1f6b.js"></script>

<script type="text/javascript" src="/component---theme-doc-item-178-a40.134c5948dbe7dbef9543.js"></script>

<script type="text/javascript" src="/content---docs-publishing-2-d-2-25a.b6240d8d8e3a0ee92a68.js"></script>

<script type="text/javascript" src="/metadata---docs-publishinge-62-bbf.771934507d70fd713fc3.js"></script>

</body>
</html>