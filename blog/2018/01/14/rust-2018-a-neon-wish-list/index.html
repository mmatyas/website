<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.9b0aefc2eff372e483a4.css","/main.ce136d421303be087674.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.358a4bd817d0c946a3fc.css","/component---site-src-pages-index-jsc-4-f-f99.2a91dd86816a2e078b39.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.c0f42af064ae6a8754fe.css","/component---theme-blog-post-pageccc-cab.36447cbeaf4672bdbb0a.js"],"content---blog-2018-10-22-hello-worldcbb-e2a":["/content---blog-2018-10-22-hello-worldcbb-e2a.9c2e83dca080d3244ada.js"],"metadata---blog-2018-10-22-hello-world-75-b-360":["/metadata---blog-2018-10-22-hello-world-75-b-360.cf00bf416a5b3b17ba73.js"],"nextItem---blog-2018-10-22-hello-world-473-b89":["/nextItem---blog-2018-10-22-hello-world-473-b89.d99cc84a55b8ebae18d6.js"],"content---blog-2018-01-14-rust-2018-a-neon-wish-listaa-8-a9b":["/content---blog-2018-01-14-rust-2018-a-neon-wish-listaa-8-a9b.d4e40b9296f12a30ba45.js"],"nextItem---blog-2018-01-14-rust-2018-a-neon-wish-listcea-8d0":["/nextItem---blog-2018-01-14-rust-2018-a-neon-wish-listcea-8d0.e89b81c942fed6090d10.js"],"content---blog-2017-09-25-neon-wants-your-help-25-f-089":["/content---blog-2017-09-25-neon-wants-your-help-25-f-089.77021380abfc9e971d4a.js"],"nextItem---blog-2017-09-25-neon-wants-your-helpbc-0-72a":["/nextItem---blog-2017-09-25-neon-wants-your-helpbc-0-72a.38139701f750bf113b09.js"],"content---blog-2016-04-01-native-js-classes-in-neon-29-a-6e2":["/content---blog-2016-04-01-native-js-classes-in-neon-29-a-6e2.5fb58c46b15092b83e94.js"],"nextItem---blog-2016-04-01-native-js-classes-in-neon-81-a-35c":["/nextItem---blog-2016-04-01-native-js-classes-in-neon-81-a-35c.e8b0ad36e6019cc5a771.js"],"content---blog-2015-12-23-neon-node-rustb-3-e-e3c":["/content---blog-2015-12-23-neon-node-rustb-3-e-e3c.92f332e2503dff40af3d.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.c0f42af064ae6a8754fe.css","/component---theme-blog-list-pagea-6-a-7ba.73e7f10320fd40850a08.js"],"content---blogcee-0c9":["/content---blogcee-0c9.35a29afc27cd16810de8.js"],"content---blog-191-793":["/content---blog-191-793.474fac1b2a9442c6f41d.js"],"content---blogab-1-45e":["/content---blogab-1-45e.3b4250fe9ebdc796d69f.js"],"content---blog-89-e-b53":["/content---blog-89-e-b53.f3496b554278894dbcb3.js"],"content---blogccb-196":["/content---blogccb-196.9e553299d1626cc06c1f.js"],"metadata---blog-1-a-9-d63":["/metadata---blog-1-a-9-d63.696b05f19503cdb900a9.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.a8f048a05ef18dca2170.css","/component---theme-doc-page-1-be-9be.6cb677395a301dd38f39.js"],"docsMetadata---docs-1-da-721":["/docsMetadata---docs-1-da-721.d68ec240f1ded33b1703.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.c470f1b94d3c35d1f80c.css","/component---theme-doc-item-178-a40.dcfe4d24a6c17fe56a8e.js"],"content---docs-classes-6-ab-bc0":["/content---docs-classes-6-ab-bc0.e97724abcab7f5e0f973.js"],"metadata---docs-classesb-07-47b":["/metadata---docs-classesb-07-47b.6c736a451e9b8a4659c7.js"],"content---docs-arrays-9-fd-c60":["/content---docs-arrays-9-fd-c60.d30e218bb32b658d1a14.js"],"metadata---docs-arraysb-79-a81":["/metadata---docs-arraysb-79-a81.dae7611ea3f45f79ec5f.js"],"content---docs-asyncfb-3-195":["/content---docs-asyncfb-3-195.1e4f9d9fce70d3e72822.js"],"metadata---docs-async-86-c-1cb":["/metadata---docs-async-86-c-1cb.a65961fe48cd126dfb71.js"],"content---docs-electron-appse-84-526":["/content---docs-electron-appse-84-526.e320a6ed69c2a41c286b.js"],"metadata---docs-electron-apps-0-a-0-79d":["/metadata---docs-electron-apps-0-a-0-79d.96091e219ebaf6ac16fb.js"],"content---docs-cli-1-a-2-6cb":["/content---docs-cli-1-a-2-6cb.e94cdc72798fd33b5de1.js"],"metadata---docs-cli-7-a-6-ef7":["/metadata---docs-cli-7-a-6-ef7.c408f1608730c2e9216c.js"],"content---docs-errors-8-a-2-a16":["/content---docs-errors-8-a-2-a16.12605c450703a8b6a2c8.js"],"metadata---docs-errorsc-0-a-e30":["/metadata---docs-errorsc-0-a-e30.b6e4b47f7d696e783d0c.js"],"content---docs-example-projectsb-58-8db":["/content---docs-example-projectsb-58-8db.bc2ed6fe936cd03acdcc.js"],"metadata---docs-example-projectse-85-8bd":["/metadata---docs-example-projectse-85-8bd.1aed2d1018eeb656b64b.js"],"content---docs-functionsd-47-b12":["/content---docs-functionsd-47-b12.825c08790d5c907de1c2.js"],"metadata---docs-functions-725-8e7":["/metadata---docs-functions-725-8e7.443068cd691c864e31f1.js"],"content---docs-getting-startedd-58-f94":["/content---docs-getting-startedd-58-f94.d93c973f3a74b9cf8a8b.js"],"metadata---docs-getting-started-57-d-ca5":["/metadata---docs-getting-started-57-d-ca5.9fb2dc6a6354cbe144b3.js"],"content---docs-guidesd-7-b-d2a":["/content---docs-guidesd-7-b-d2a.3dfa0fb062962a42be41.js"],"metadata---docs-guides-390-64f":["/metadata---docs-guides-390-64f.4e2cfd551a2c40db4fd8.js"],"content---docs-intro-0-e-3-be1":["/content---docs-intro-0-e-3-be1.b1a242e06b95809eedbf.js"],"metadata---docs-intro-368-f5c":["/metadata---docs-intro-368-f5c.339f392dcb2bae9010b9.js"],"content---docs-modules-23-d-147":["/content---docs-modules-23-d-147.d30eeae6bf40eefc0142.js"],"metadata---docs-modules-572-72c":["/metadata---docs-modules-572-72c.107aa54049ea7892401b.js"],"content---docs-hello-world-900-633":["/content---docs-hello-world-900-633.71c85551fa776908b910.js"],"metadata---docs-hello-world-5-fa-289":["/metadata---docs-hello-world-5-fa-289.cb3986e83797f3498581.js"],"content---docs-learning-resources-4-bb-6d1":["/content---docs-learning-resources-4-bb-6d1.21c5d52d965b76ced6d2.js"],"metadata---docs-learning-resources-8-f-4-098":["/metadata---docs-learning-resources-8-f-4-098.8c5974a7dfdb730d48ee.js"],"content---docs-json-3-ad-4fa":["/content---docs-json-3-ad-4fa.dc25962d98070bdeab6a.js"],"metadata---docs-json-9-f-3-aa7":["/metadata---docs-json-9-f-3-aa7.6629bcfb52562e966de2.js"],"content---docs-primitivesf-05-214":["/content---docs-primitivesf-05-214.bbaf552a7566ee42a57c.js"],"metadata---docs-primitivesd-85-9c2":["/metadata---docs-primitivesd-85-9c2.88516f2adfaf46b2ecf0.js"],"content---docs-parallelism-003-d1d":["/content---docs-parallelism-003-d1d.5fdd457a34fd47536330.js"],"metadata---docs-parallelismc-81-633":["/metadata---docs-parallelismc-81-633.34928c00cdaff7659b77.js"],"content---docs-publishing-2-d-2-25a":["/content---docs-publishing-2-d-2-25a.046de2bde92ef2af4b11.js"],"metadata---docs-publishinge-62-bbf":["/metadata---docs-publishinge-62-bbf.a21a2352962284f3b2a6.js"],"content---docs-arguments-65-b-849":["/content---docs-arguments-65-b-849.27a11c545b6f77efe63b.js"],"metadata---docs-arguments-6-fe-fea":["/metadata---docs-arguments-6-fe-fea.6f6fc2e73206d1707220.js"],"content---docs-objectsb-51-593":["/content---docs-objectsb-51-593.a3c7b0eb268ec18fb7fd.js"],"metadata---docs-objects-066-5ec":["/metadata---docs-objects-066-5ec.683c31640e7d5d5208b7.js"],"content---docs-sdl-2-guide-658-6b7":["/content---docs-sdl-2-guide-658-6b7.b65129e9b6a7bd910e14.js"],"metadata---docs-sdl-2-guide-958-5dd":["/metadata---docs-sdl-2-guide-958-5dd.c173b42240542fc11174.js"],"content---docs-word-counting-99-f-4ea":["/content---docs-word-counting-99-f-4ea.0edd4083dd0955dfd419.js"],"metadata---docs-word-countingb-5-c-379":["/metadata---docs-word-countingb-5-c-379.219638f42341c7ba7e07.js"],"content---docs-type-checking-02-d-2e2":["/content---docs-type-checking-02-d-2e2.5cff8f9e050f73f1c40a.js"],"metadata---docs-type-checking-45-c-033":["/metadata---docs-type-checking-45-c-033.0a44400b6a3396a8465b.js"],"content---docs-roadmap-0-df-a69":["/content---docs-roadmap-0-df-a69.f24a83550845276e512f.js"],"metadata---docs-roadmap-5-f-6-348":["/metadata---docs-roadmap-5-f-6-348.4069d1614382e4654244.js"],"content---docs-tooling-12-e-380":["/content---docs-tooling-12-e-380.dbdbc7b7f67d5a1845e6.js"],"metadata---docs-tooling-6-ec-0db":["/metadata---docs-tooling-6-ec-0db.d26b077698a34d0feade.js"]};/*]]>*/</script>

<title data-react-helmet="true">#Rust2018: A Neon Wish List</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="#Rust2018: A Neon Wish List"/><meta data-react-helmet="true" name="description" content="‚ö†Ô∏è This article contains references to an outdated version of neon ‚ö†Ô∏è"/><meta data-react-helmet="true" property="og:description" content="‚ö†Ô∏è This article contains references to an outdated version of neon ‚ö†Ô∏è"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/logo/letter-logo.png"/>


<link rel="stylesheet" type="text/css" href="/main.9b0aefc2eff372e483a4.css" />

<link rel="stylesheet" type="text/css" href="/0.a5d98dcdf0bbe087ed21.css" />

<link rel="stylesheet" type="text/css" href="/1.27ddfe0828c980c86fac.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-blog-post-pageccc-cab.c0f42af064ae6a8754fe.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/logo/letter-logo.png" alt="Neon Logo"/><strong class="">Neon</strong></a><a class="navbar__item navbar__link" label="Docs" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="https://github.com/neon-bindings/examples#table-of-contents" label="Examples" target="_blank" rel="noopener noreferrer">Examples</a><a class="navbar__item navbar__link" href="/api/neon/" label="API" target="_blank" rel="noopener noreferrer">API</a><a class="navbar__item navbar__link" label="Resources" href="/docs/learning-resources">Resources</a><a class="navbar__item navbar__link" label="Roadmap" href="/docs/roadmap">Roadmap</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" label="Blog" href="/blog">Blog</a><a class="navbar__item navbar__link" href="https://github.com/neon-bindings/neon" label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_3J-v"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_Q9cy moon_1D9f"></span></div><div class="react-toggle-track-x"><span class="toggle_Q9cy sun_1k0k"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div><div class="navbar__search"><span role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="search-bar"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/logo/letter-logo.png" alt="Neon Logo"/><strong>Neon</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" href="/docs/intro">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/neon-bindings/examples#table-of-contents" label="Examples" target="_blank" rel="noopener noreferrer">Examples</a></li><li class="menu__list-item"><a class="menu__link" href="/api/neon/" label="API" target="_blank" rel="noopener noreferrer">API</a></li><li class="menu__list-item"><a class="menu__link" label="Resources" href="/docs/learning-resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" label="Roadmap" href="/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" label="Blog" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/neon-bindings/neon" label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container margin-vert--xl"><div class="row"><div class="col col--8 col--offset-2"><div><header><h1 class="margin-bottom--sm blogPostTitle_3vXB"><a aria-current="page" class="active" href="/blog/2018/01/14/rust-2018-a-neon-wish-list">#Rust2018: A Neon Wish List</a></h1><div class="margin-bottom--sm"><small>January<!-- --> <!-- -->14<!-- -->, <!-- -->2018</small></div><div class="avatar margin-bottom--md"><div class="avatar__intro"><h4 class="avatar__name"><a target="_blank" rel="noreferrer noopener">Dave Herman</a></h4><small class="avatar__subtitle"></small></div></div></header><article class="markdown"><p>‚ö†Ô∏è This article contains references to an outdated version of neon ‚ö†Ô∏è</p><p>While I&#x27;ve been thoroughly enjoying the Rust community&#x27;s spirited <a href="https://blog.rust-lang.org/2018/01/03/new-years-rust-a-call-for-community-blogposts.html">#Rust2018 blog-fest</a>, I wasn&#x27;t really thinking of participating myself until <a href="http://jvns.ca">Julia Evans</a> pointed out <a href="https://twitter.com/b0rk/status/952370352759418880">the leadership wants to hear from everyone</a>---even if I might not have anything especially new to add. So here&#x27;s my little wish list for Rust in 2018.</p><p>Since I&#x27;m not in Rust&#x27;s leadership, I don&#x27;t have to worry about synthesizing some grand narrative for the whole of Rust. So I&#x27;ll just focus on a few things that would be personally useful to me. In particular, I&#x27;ll stick to topics that would be helpful for my <a href="https://www.neon-bindings.com">Neon</a> project, a set of bindings for writing native Node extension modules in Rust.</p><h1><a aria-hidden="true" class="anchor" id="stabilize-impl-trait"></a><a aria-hidden="true" class="hash-link" href="#stabilize-impl-trait">#</a>Stabilize <code>impl trait</code></h1><p>The most challenging part of keeping Neon&#x27;s design manageable is the annotation burden. Neon provides a safe API for managing handles into Node&#x27;s JavaScript garbage collector, and to do this, it requires passing around a &quot;handle scope&quot; parameter everywhere, which tracks the lifetimes of handles. There are a few flavors of handle scopes, which means helper functions in Neon projects often end up with some pretty hairy signatures:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-rust codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">fn</span><span class="token plain"> get_foo_bar</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a,</span><span class="token plain"> S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Scope</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token keyword" style="font-style:italic">mut</span><span class="token plain"> S</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Handle</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a,</span><span class="token plain"> JsObject</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-&gt;</span><span class="token plain"> JsResult</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token lifetime-annotation symbol">&#x27;a,</span><span class="token plain"> JsValue</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// extract the `obj.foo` property and check that it&#x27;s an object</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> foo </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsObject</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// extract the `obj.foo.bar` property</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bar&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">Ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>I would love for Neon users to be able to combine lifetime elision and the <a href="https://github.com/rust-lang/rust/issues/34511"><code>impl trait</code></a> shorthand syntax to write something like:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-rust codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">fn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_foo_bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token keyword" style="font-style:italic">mut</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">impl</span><span class="token plain"> Scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Handle</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsObject</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-&gt;</span><span class="token plain"> JsResult</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsValue</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>(With an upcoming <a href="https://github.com/dherman/rfcs-1/blob/vm-two-point-oh/text/vm-2.0.md">cleanup of the core Neon API</a>, the details of this would change a bit, but <code>impl trait</code> would be just as appealing.)</p><h1><a aria-hidden="true" class="anchor" id="syntactic-abstraction-for-error-propagation"></a><a aria-hidden="true" class="hash-link" href="#syntactic-abstraction-for-error-propagation">#</a>Syntactic abstraction for error propagation</h1><p>I adore the <code>?</code> syntax, but it&#x27;s not enough! Expressions like <code>Ok(bar)</code> in the above example are an indication that we don&#x27;t have a complete abstraction layer in the syntax for error propagation. I find it particularly galling when I have to see <code>Ok(())</code>. It&#x27;s dipping down into an unnecessary abstraction layer, distracting the core logic of the function with mechanical details of the representation of Rust&#x27;s control flow protocols.</p><p>I&#x27;m excited about the discussions around <a href="https://internals.rust-lang.org/t/pre-rfc-catching-functions/6505">&quot;catching functions&quot;</a>. I think we can get to a sweet spot where we have an abstraction layer in the syntax that never exposes the <code>Result</code> type for error handling, while still explicitly annotating every point that may throw (thanks to <code>?</code> syntax, and by contrast to exceptions). The above examples might look something like:</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-rust codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">fn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_foo_bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token keyword" style="font-style:italic">mut</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">impl</span><span class="token plain"> Scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Handle</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsObject</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-&gt;</span><span class="token plain"> Handle</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsValue</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> catch JsException </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> foo </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;foo&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">JsObject</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> bar </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;bar&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><h1><a aria-hidden="true" class="anchor" id="make-cargo-more-extendable"></a><a aria-hidden="true" class="hash-link" href="#make-cargo-more-extendable">#</a>Make cargo more extendable</h1><p>Like <code>xargo</code> and <code>wargo</code>, Neon comes with a command-line tool that wraps cargo&#x27;s behavior in order to abstract away a bunch of build configuration details. I&#x27;m proud of this abstraction, because it makes building native modules in Node far easier than they are with C++. But I would much rather Neon programmers could use cargo directly, calling all their usual familiar commands like <code>cargo build</code> and <code>cargo run</code>.</p><p>To support this, Neon will need a handful of extension points that don&#x27;t exist today:</p><ul><li>The ability to extend the memoization logic with extra environmental information (e.g. which version of Node is being built for and the values of some Node-specific environment variables).</li><li>Post-build hooks, so I can generate the final DLL and put it in the right directory.</li><li>The ability to add default build flags (for example, on macOS, <code>neon build</code> actually calls <code>cargo rustc</code> with some extra low-level linking flags).</li><li>Project templates for <code>cargo new</code>.</li></ul><p>Being able to write</p><pre class="mdxCodeBlock_ziUc"><div class="codeBlockWrapper_3ZcX"><pre class="prism-code language-shell codeBlock_1wn8" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo new --template</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">neon my-first-neon-project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> my-first-neon-project</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo run</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button></div></pre><p>would be so amazing.</p><h1><a aria-hidden="true" class="anchor" id="neon-is-about-welcoming-js-programmers"></a><a aria-hidden="true" class="hash-link" href="#neon-is-about-welcoming-js-programmers">#</a>Neon is about welcoming JS programmers</h1><p>I promised no narrative, but there is a common thread here. I started the Neon project because I thought it would make a great bridge between the JavaScript and Rust communities. All of the topics in this post are about facilitating that connection:</p><ul><li>Neon forces JS programmers to get more explicit about working with the garbage collector than they normally have to, so making that as lightweight as possible makes falling into native code less of a steep cliff.</li><li>JS is a language with exceptions, so making the protocol for emulating exceptions in Rust as ergonomic as possible will make Rust a better environment for JS programmers.</li><li>And just as Node projects have a workflow oriented around <code>npm</code>, giving Neon projects a standard <code>cargo</code>-based workflow will feel familiar and pleasant to Node programmers.</li></ul><p>My dream is that Neon can serve as a gateway welcoming JS programmers into Rust and systems programming for years to come. The more we smoothe the path between them, the more people we invite into our community.</p></article><div class="row margin-vert--lg"><div class="col"></div><div class="col text--right"></div></div></div><div class="margin-vert--xl"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2018/10/22/hello-world"><h5 class="pagination-nav__link--sublabel">Previous Post</h5><h4 class="pagination-nav__link--label">¬´ <!-- -->New Docs and Website! üéâüéâüéâ</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2017/09/25/neon-wants-your-help"><h5 class="pagination-nav__link--sublabel">Next Post</h5><h4 class="pagination-nav__link--label">Neon Wants Your Help!<!-- --> ¬ª</h4></a></div></nav></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Getting Started" href="/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" label="Examples" url="https://github.com/neon-bindings/examples">Examples</a></li><li class="footer__item"><a class="footer__link-item" label="API Reference" to="https://neon-bindings.com/api/neon/index.html" href="https://neon-bindings.com/api/neon/index.html">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="Community Chat" url="https://rust-bindings-slackin.herokuapp.com">Community Chat</a></li><li class="footer__item"><a class="footer__link-item" label="Twitter" to="https://twitter.com/rustneon" href="https://twitter.com/rustneon">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="GitHub" to="https://github.com/neon-bindings/neon" href="https://github.com/neon-bindings/neon">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Neon Logo" src="/logo/text-logo.svg"/></div>Copyright ¬© 2019 Neon Bindings</div></div></footer>
</div>

<script type="text/javascript" src="/runtime~main.4065e0513f6e595f784e.js"></script>

<script type="text/javascript" src="/main.ce136d421303be087674.js"></script>

<script type="text/javascript" src="/0.4b32e68eb0c1f2ec7fdc.js"></script>

<script type="text/javascript" src="/1.03d30ec9a08dd178696f.js"></script>

<script type="text/javascript" src="/component---theme-blog-post-pageccc-cab.36447cbeaf4672bdbb0a.js"></script>

<script type="text/javascript" src="/content---blog-2018-01-14-rust-2018-a-neon-wish-listaa-8-a9b.d4e40b9296f12a30ba45.js"></script>

<script type="text/javascript" src="/nextItem---blog-2018-10-22-hello-world-473-b89.d99cc84a55b8ebae18d6.js"></script>

<script type="text/javascript" src="/metadata---blog-2018-10-22-hello-world-75-b-360.cf00bf416a5b3b17ba73.js"></script>

<script type="text/javascript" src="/nextItem---blog-2018-01-14-rust-2018-a-neon-wish-listcea-8d0.e89b81c942fed6090d10.js"></script>

</body>
</html>